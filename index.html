<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no"/>
        <meta name="msapplication-tap-highlight" content="no"/>
        <meta name="viewport"
              content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"/>
        <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
        <meta http-equiv="Content-Security-Policy"
              content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *"/>
        <title>CITYCARE Mobile Application</title>

        <!--        <link rel="stylesheet" type="text/css" href="css/index.css" />-->
        <link rel="stylesheet" type="text/css" href="css/leaflet.css"/>
        <link href="css/jquery.mobile-1.4.5.min.css" rel="stylesheet" type="text/css"/>
        <!--        <link rel="stylesheet" href="css/demo.css" />-->
        <link rel="stylesheet" type="text/css" href="font-awesome/css/font-awesome.min.css"/>
        <!--        <link href="css/jquery.mmenu.all.css" type="text/css" rel="stylesheet" />-->
        <link rel="stylesheet" href="css/jquery.mobile.icons.min.css"/>
        <link rel="stylesheet" href="css/fonts.css"/>
        <link rel="stylesheet" href="css/style.css"/>
        <script type="text/javascript" src="js/moment.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script src="js/jquery.js" type="text/javascript"></script>
        <script src="js/jquery.mobile-1.4.5.min.js" type="text/javascript"></script>
        <script src="js/jquery.waypoints.min.js"></script>
        <script src="js/scripts.js"></script>
        <script type="text/javascript" src="js/leaflet.js"></script>

        <script type="text/javascript">
            app.initialize();

            // local storage setters
            localStorage.setItem('typewrite', '[ "Hi, my name is Alexa, I am here to give some advice to protect against natural disasters, please choose the options below" ]');
            localStorage.setItem('fire', '[ "You have selected the fire option... The list of precautions and steps to take in case of any emergency can be below:" ]');
            localStorage.setItem('flood', '[ "You have selected the flood option... See below for instructions in case of emergency and precautions to be taken:" ]');
            localStorage.setItem('flood', '[ "You have selected the cyclone option... Below are a list of steps in case of emergency and measures to be taken as precaution" ]');
            localStorage.setItem('header-title', '<img class="logo-small" src="img/logo.png"/> CITYCARE');
            localStorage.setItem('shelters', '{"shelters":[{"addr":"Camp Yoloff Community Centre, Route Militaire","latitude":"-20.127760","longitude":"57.533300"},{"addr":"Cité Gabriel Martial Community Centre, Route Militaire","latitude":"-20.127669","longitude":"57.533257"},{"addr":"Vallée des Prêtres Co-operative Credit Centre Complex, Vallee des Prêtres","latitude":"-20.157941","longitude":"57.531373"},{"addr":"Mont Roches Social Welfare Centre, Royal Rd Mont Roches","atitude":"-20.283130","longitude":"57.504340"},{"addr":"S. Murday SSS (Vocational), Marcel Cabon St Stanley R. Hill","atitude":"-20.224233","longitude":"57.459648"}]}');
        </script>
        <script id="panel-init">
            $(function () {
                $("body>[data-role='panel']").panel();
            });

            $(document).on("pagecreate", "#home", function () {
                $(document).on("swipeleft swiperight", "#home", function (e) {
                    // We check if there is no open panel on the page because otherwise
                    // a swipe to close the left panel would also open the right panel (and v.v.).
                    // We do this by checking the data that the framework stores on the page element (panel: open).
                    if ($(".ui-page-active").jqmData("panel") !== "open") {
                        if (e.type === "swipeleft") {
                            $("#right-panel").panel("open");
                        } else if (e.type === "swiperight") {
                            $("#left-panel").panel("open");
                        }
                    }
                });
                // local storage getters



            });
            $(document).on("pagechange", "#body", function (e, f) {
                var page_id = f.toPage[0].id;
                console.log(page_id);
                $('.typewrite').attr('data-type', localStorage.getItem('typewrite'));
                $('.header-title').html(localStorage.getItem('header-title'));
                var msg = new SpeechSynthesisUtterance(localStorage.getItem('typewrite'));
                //window.speechSynthesis.speak(msg);
                var geo =  JSON.parse(localStorage.getItem('shelters'));
                console.log(geo);

            });
        </script>

        <style>
            .txtTitle {
                text-align: center;
            }

            #mapid {
                height: 100vw;
            }
        </style>
        <script src="js/moment.min.js"></script>

    </head>
    <body id="body">

        <div data-role="panel" id="right-panel" data-position="right" data-display="push" data-theme="a">
            <ul data-role="listview" id="sideMenu">
                <li data-icon='false'><a data-fajax="false" href="#home"><span class="fa fa-home"></span>
                        Homepage</a>
                </li>
                <li data-icon='false'><a data-fajax="false" href="#fire"><span class="fa  fa-fire"></span> Fire</a>
                </li>
                <li data-icon='false'><a data-fajax="false" href="#flood"><span class="fa fa-bullhorn"></span>
                        Flood</a>
                </li>
                <li data-icon='false'><a data-fajax="false" href="#cyclone"><span class="fa  fa-map-marker"></span>
                        Cyclone</a>
                </li>
            </ul>



        </div>
        <div data-role="page" id="home">
            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>
            <div role="main" class="ui-content">
                <div class="typo">
                    <div class="demo">
                        <img class="logo animate-flicker" src="img/logo.png"/><br/>
                        <p class="">
                            <span class="typewrite" data-period="0"
                                  data-type=''>
                                <span class="wrap font"></span>
                            </span>
                        </p>
                    </div>
                </div>
                <ul data-role="listview" id="nav_menu">
                    <li><a href="#fire" class="" id="fire"><i class="fa fa-fire"></i> Fire</a></li>
                    <li><a href="#flood" id="flood"><i class="fa fa-tint"></i> Flood</a></li>
                    <li><a href="#cyclone" id="cyclone"><i class="fa fa-superpowers"></i> Cyclone</a></li>
                </ul>
                <div class="app">
                    <div id="deviceready" class="blink">
                    </div>
                </div>
                <div class="clearfix">&nbsp;</div>
                <h3 class="text-center font text-border">Weather</h3>
                <div id="weather">
                    <div id="weatSum">
                        <img src="img/weatherLoader.gif" class="wIcon" id="weatherIcon"/>
                        <label id="weatherText" class="font">Loading</label>
                    </div>

                    <div id="temperature">
                        <img src="img/weatherLoader.gif" class="wIcon" id="tempIcon"/>
                        <label id="tempText" class="font"><strong>Loading</strong></label>
                    </div>
                </div>
            </div>
            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa fa-map-marker"></span></a></li>
                    </ul>
                </div>


            </div>
        </div>
        <div data-role="page" id="fire">

            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>

            <div role="main" class="ui-content">
                <div class="typo">
                    <div class="demo">
                        <img class="logo animate-flicker" src="img/logo-fire.png"/><br/>
                        <!--                        <div id='bars'>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                </div>-->
                        <p class="">
                            <span class="typewrite" data-period="0"
                                  >
                                <span class="wrap"></span>
                            </span>
                        </p>


                    </div>

                </div>

                <!-- <div class="app">
        
                    <div id="deviceready" class="blink">
                        <p class="event listening">Connecting to Device</p>
                        <p class="event received">Device is Ready</p>
                        <h3>Weather</h3>
                        <div id="weather">Connecting...</div>
                        <hr>
                        <h3>Map</h3>
                        <div id="mapid"></div>
                    </div>
                </div>-->


            </div>

            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa  fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa   fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa    fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa   fa-map-marker"></span></a></li>
                    </ul>
                </div>


            </div>
        </div><!-- /page -->

        <div data-role="page" id="flood">

            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>

            <div role="main" class="ui-content">
                <div class="typo">
                    <div class="demo">
                        <img class="logo animate-flicker" src="img/logo-flood.png"/><br/>
                        <!--                        <div id='bars'>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                </div>-->
                        <p class="">
                            <span class="typewrite" data-period="0"
                                  >
                                <span class="wrap"></span>
                            </span>
                        </p>


                    </div>

                </div>


                <!-- <div class="app">
        
                    <div id="deviceready" class="blink">
                        <p class="event listening">Connecting to Device</p>
                        <p class="event received">Device is Ready</p>
                        <h3>Weather</h3>
                        <div id="weather">Connecting...</div>
                        <hr>
                        <h3>Map</h3>
                        <div id="mapid"></div>
                    </div>
                </div>-->


            </div>

            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa  fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa   fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa    fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa   fa-map-marker"></span></a></li>
                    </ul>
                </div>


            </div>
        </div><!-- /page -->


        <div data-role="page" id="cyclone">

            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>

            <div role="main" class="ui-content">
                <div class="typo">
                    <div class="demo">
                        <img class="logo animate-flicker" src="img/logo-cyclone.png"/><br/>
                        <!--                        <div id='bars'>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                    <div class='bar'></div>
                                                </div>-->
                        <p class="">
                            <span class="typewrite" data-period="0"
                                  >
                                <span class="wrap"></span>
                            </span>
                        </p>


                    </div>

                </div>


                <!-- <div class="app">
        
                    <div id="deviceready" class="blink">
                        <p class="event listening">Connecting to Device</p>
                        <p class="event received">Device is Ready</p>
                        <h3>Weather</h3>
                        <div id="weather">Connecting...</div>
                        <hr>
                        <h3>Map</h3>
                        <div id="mapid"></div>
                    </div>
                </div>-->


            </div>

            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa  fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa   fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa    fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa   fa-map-marker"></span></a></li>
                    </ul>
                </div>


            </div>
        </div><!-- /page -->
        <div data-role="page" id="mylocation">

            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>

            <div role="main" class="ui-content">

                <br>
                <br>

                <h3 class="font"><i class="fa fa-map-marker"></i> Find your location on map</h3>
                <div id="mapid"></div>


            </div>

            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa  fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa   fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa    fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa   fa-map-marker"></span></a></li>
                    </ul>
                </div>


            </div>
        </div><!-- /page -->

        <div data-role="page" id="newsfeed">

            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>

            <div role="main" class="ui-content">
                <div class="typo">
                    <div class="demo">
                        <img class="logo animate-flicker" src="img/logo-news.png"/><br/>
                        <p class="">
                            <span class="typewrite" data-period="0"
                                  data-type=''>
                                <span class="wrap font"></span>
                            </span>
                        </p>
                    </div>
                </div>
                <br>
                <br>

                <h3 class="text-center font text-border"><i class="fa fa-newspaper-o"></i> Recent News</h3>
                <div id="news">


                </div>


            </div>
            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa  fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa   fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa    fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa   fa-map-marker"></span></a></li>
                    </ul>
                </div>
            </div>
        </div><!-- /page -->
        <div data-role="page" id="emergency-shelters">

            <div id="nav" data-role="header" data-position="fixed" data-tap-toggle="false" class="jqm-header">
                <h1 class="header-title"> </h1>
                <a data-role="none" href='#right-panel' id="sidebar-btn-right"></a>
            </div>

            <div role="main" class="ui-content">
                <div class="typo">
                    <div class="demo">
                        <img class="logo animate-flicker" src="img/logo-shelters.png"/><br/>
                        <p class="">
                            <span class="typewrite" data-period="0"
                                  data-type=''>
                                <span class="wrap font"></span>
                            </span>
                        </p>
                    </div>
                </div>
                <br>
                <br>

                <h3 class="text-center font text-border"><i class="fa fa-medkit" aria-hidden="true"></i> Emergency Shelters by Regions</h3>
              <!--  <div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" style="padding:0">
                    <h4>North</h4>
                    <ul data-role="listview">
                        <li><a href="#shelters-map">Camp Yoloff Community Centre, Route Militaire</a></li>
                        <li><a href="#shelters-map">Cité Gabriel Martial Community Centre, Route Militaire</a></li>
                    </ul>
                </div>
                <div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" style="padding:0">
                    <h4>South</h4>
                    <ul data-role="listview" data-inset="false">
                        <li>map</li>
                    </ul>
                </div>
                <div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" style="padding:0">
                    <h4>East</h4>
                    <ul data-role="listview" data-inset="false">
                        <li>map</li>
                    </ul>
                </div>
                <div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" style="padding:0">
                    <h4>West</h4>
                    <ul data-role="listview" data-inset="false">
                        <li>map</li>
                    </ul>
                </div>
                <div data-role="collapsible" data-collapsed-icon="carat-d" data-expanded-icon="carat-u" style="padding:0">
                    <h4>Center</h4>
                    <ul data-role="listview" data-inset="false">
                        <li>map</li>
                    </ul>
                </div>-->
                <div id="shelterMapid"></div>
            </div>
            <div data-role="footer" data-position="fixed" data-tap-toggle="false" class="jqm-footer">
                <div data-role="navbar" class="custom-icons" data-grid="c" data-position="fixed">
                    <ul id="footer-nav">
                        <li><a href="#home"><span class="fa  fa-home"></span></a></li>
                        <li><a href="#emergency-shelters"  id="mail"><span class="fa   fa-thermometer"></span></a>
                        </li>
                        <li><a href="#newsfeed"  id="camera"><span class="fa    fa-bullhorn"></span></a>
                        </li>
                        <li><a href="#mylocation" id="star"><span class="fa   fa-map-marker"></span></a></li>
                    </ul>
                </div>


            </div>

        </div><!-- /page -->

        <script>
            $(document).ready(function () {
                var scroll_pos = 0;
                $(document).scroll(function () {
                    scroll_pos = $(this).scrollTop();
                    if (scroll_pos > 100) {
                        $("#nav").css('background-color', 'black');
                        $("#nav").css('color', 'black');
                    } else {
                        $("#nav").css('background-color', 'transparent');
                        $("#nav").css('color', 'white');
                    }
                });
            });
        </script>

    </body>